<% if current_user %>
  <% if lesson.course.bought(current_user) || @course.user == current_user %>
    <% if lesson.viewed(current_user) == true %>
      <div class="text-success fa fa-check-square"></div>
    <% else %>
      <div class="text-danger fa fa-check-square"></div>
    <% end %>
  <% else %>
    <div class="fa fa-check-square"></div>
  <% end %>
  <%= link_to lesson.title, course_lesson_path(@course, lesson) %>
<% else %>
  <div class="fa fa-check-square"></div>
  <%= link_to lesson.title, course_lesson_path(@course, lesson) %>
<% end %>

<div class="float-right">
  <% if policy(lesson).edit? %>
    <%= link_to 'Edit', edit_course_lesson_path(@course, lesson), class: 'btn btn-sm btn-warning' %>
    <%= link_to 'Destroy', [@course, lesson], method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-sm btn-danger' %>
  <% end %>
</div>
